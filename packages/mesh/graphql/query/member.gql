query GetMemberFollowing($memberId: ID!, $takes: Int!) {
  member(where: { id: $memberId }) {
    id
    name
    avatar
    following {
      id
      name
      avatar
      following(where: { id: { gte: 0 } }, orderBy: { id: asc }, take: 10000) {
        id
        name
        avatar
        followerCount
      }
      pick(
        where: {
          kind: { equals: "read" }
          AND: [{ is_active: { equals: true } }]
        }
        orderBy: { createdAt: desc }
        take: $takes
      ) {
        id
        createdAt
        story {
          ...UserActionStory
        }
      }
      comment(orderBy: { createdAt: desc }, take: $takes) {
        id
        createdAt
        story {
          ...UserActionStory
        }
      }
    }
    pick(
      where: {
        kind: { equals: "read" }
        AND: [{ is_active: { equals: true } }]
      }
    ) {
      id
      story {
        id
      }
    }
  }
}

query GetMember($memberId: ID!) {
  member(where: { id: $memberId }) {
    id
    name
    avatar
    followingMembers: following {
      id
      name
    }
    picks: pick {
      id
      story {
        id
      }
    }
    followingCategories: following_category(orderBy: { id: asc }) {
      id
      title
      slug
    }
    followPublishers: follow_publisher {
      id
      title
    }
  }
}

query GetMemberByFollowingCategory($slugs: [String!]!) {
  members(
    where: { following_category: { every: { slug: { in: $slugs } } } }
    orderBy: [{ id: desc }]
    take: 20
    skip: 0
  ) {
    id
    customId
    name
    nickname
    avatar
  }
}

query GetCurrentUserMemberId($uid: String!) {
  member(where: { firebaseId: $uid }) {
    id
    name,
    customId,
    avatar,
    wallet
  }
}

query GetMemberProfile($customId: String, $takes: Int!) {
  member(where: { customId: $customId }) {
    id
    name
    avatar
    avatar_image {
      urlOriginal
    }
    intro
    picksCount: pickCount(
      where: { kind: { equals: "read" }, is_active: { equals: true } }
    )
    followingCount
    followerCount

    picks: pick(
      where: { kind: { equals: "read" }, is_active: { equals: true } }
      take: $takes
    ) {
      story {
        id
        og_image
        source {
          title
          official_site
        }
        title
        og_title
        createdAt
        tag {
          id
          name
        }
        pick {
          createdAt
          member {
            id
            name
            avatar
          }
        }
        pickCount
        commentCount
        paywall
        full_screen_ad
        published_date
        comment(
          orderBy: { createdAt: desc }
          where: { member: { customId: { equals: $customId } } }
          take: 1
        ) {
          id
          content
          createdAt
          likeCount
          member {
            id
            name
            avatar
          }
        }
      }
      kind
    }

    booksCount: pickCount(
      where: { kind: { equals: "bookmark" }, is_active: { equals: true } }
    )
    books: pick(
      where: { kind: { equals: "bookmark" }, is_active: { equals: true } }
      take: $takes
    ) {
      story {
        id
        og_image
        source {
          title
          official_site
        }
        title
        og_title
        commentCount
        createdAt
        tag {
          id
          name
        }
        pick {
          createdAt
          member {
            id
            name
            avatar
          }
        }
        pickCount
        commentCount
        paywall
        full_screen_ad
        published_date
        comment(
          orderBy: { createdAt: desc }
          where: { member: { customId: { equals: $customId } } }
          take: 1
        ) {
          id
          content
          createdAt
          likeCount
          member {
            id
            name
            avatar
          }
        }
      }
      kind
    }
  }
}

query GetVisitorProfile($customId: String, $takes: Int!) {
  member(where: { customId: $customId }) {
    id
    name
    avatar
    avatar_image {
      urlOriginal
    }
    intro
    picksCount: pickCount(
      where: { kind: { equals: "read" }, is_active: { equals: true } }
    )
    followingCount
    followerCount

    picks: pick(
      where: { kind: { equals: "read" }, is_active: { equals: true } }
      take: $takes
    ) {
      story {
        id
        og_image
        source {
          title
          official_site
        }
        title
        og_title
        createdAt
        tag {
          id
          name
        }
        pick {
          createdAt
          member {
            id
            name
            avatar
          }
        }
        pickCount
        commentCount
        paywall
        full_screen_ad
        published_date
        comment(
          orderBy: { createdAt: desc }
          where: { member: { customId: { equals: $customId } } }
        ) {
          id
          content
          createdAt
          likeCount
          member {
            id
            name
            avatar
          }
        }
      }
      kind
    }
  }
}

query GetMemberFollowingList($customId: String, $take: Int!) {
  member(where: { customId: $customId }) {
    id
    name
    avatar
    followingCount
    follow_publisherCount
    following(take: $take) {
      id
      customId
      name
      avatar
    }
    follow_publisher(take: $take) {
      id
      customId
      title
      logo
    }
  }
}

query GetMemberFollowerList($customId: String, $take: Int!) {
  member(where: { customId: $customId }) {
    id
    name
    avatar
    followingCount
    follower(take: $take) {
      id
      customId
      name
      avatar
    }
  }
}
