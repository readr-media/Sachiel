query GetMemberFollowing($memberId: ID!, $takes: Int!) {
  member(where: { id: $memberId }) {
    id
    name
    avatar
    following {
      id
      name
      avatar
      following(where: { id: { gte: 0 } }, orderBy: { id: asc }, take: 10000) {
        id
        name
        avatar
        followerCount
      }
      pick(
        where: {
          kind: { equals: "read" }
          AND: [{ is_active: { equals: true } }]
        }
        orderBy: { createdAt: desc }
        take: $takes
      ) {
        id
        createdAt
        story {
          ...UserActionStory
        }
      }
      comment(orderBy: { createdAt: desc }, take: $takes) {
        id
        createdAt
        story {
          ...UserActionStory
        }
      }
    }
    pick(
      where: {
        kind: { equals: "read" }
        AND: [{ is_active: { equals: true } }]
      }
    ) {
      id
      story {
        id
      }
    }
  }
}

query GetMember($memberId: ID!) {
  member(where: { id: $memberId }) {
    id
    name
    avatar
    followingMembers: following {
      id
      name
    }
    picks: pick {
      id
      story {
        id
      }
    }
    followingCategories: following_category(orderBy: { id: asc }) {
      id
      title
      slug
    }
    followPublishers: follow_publisher {
      id
      title
    }
  }
}

query GetMemberByFollowingCategory($slugs: [String!]!) {
  members(
    where: {
      following_category: {
        every: {
          slug: {
            in: $slugs
          }
        }
      }
    },
    orderBy: [{
      id: desc
    }],
    take: 20,
    skip: 0
  ) {
    id
    customId
    name
    nickname
    avatar
  }
}

query GetCurrentUserMemberId($uid: String!) {
  member(where: { firebaseId: $uid }) {
    id
  }
}
